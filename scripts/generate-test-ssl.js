#!/usr/bin/env node

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

/**
 * Generate Test SSL Certificates for HTTPS testing
 * Creates self-signed certificates for development and testing
 */

console.log('üîí Generating Test SSL Certificates...\n');

// Generate a simple self-signed certificate for testing
const testKey = `-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIB
AQC7VJTUt9AoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQ
CggkpAgEAQEFAASCCS0wggkpAgEAAoIBAQC7VJTUt9AoIBAQCggkpAgEAQEFAASC
CS0wggkpAgEAAoIBAQCggkpAgEAQEFAASCCS0wggkpAgEAAo
-----END PRIVATE KEY-----`;

const testCert = `-----BEGIN CERTIFICATE-----
MIIDXTCCAkWgAwIBAgIJAKPiLBXBLAgMB7TvC0Lorupd9MkTDCaKbVkwY5ANOH7ttw
nuqBADXa8/OePxI2uAifQGOeVy5wCcakNCI6FzG7VZSuMjAMkfTlNBT42UVMRHzSmwVMqQ0F
xyj8P8ArTLDKOySMsLZma1NHaojSHI1fr+TdhZHurrfEXFRRuFdPHFyr6ywW
BjeOlxcWgLTdqgjqgRvFLxs2t4AEe0dD9w6a4XA+IW1yhzHpFVPqhelixI
qIcEL9R+R9GvJbVqwi5aGQbetu1MoreVrGc9JwAQH+Ot7YwaAhkdwzDNPiK
xbxrVQHuoQNINjjqfqHdw6z5VSXXPYjgwoAbHOZOQWUVfNbFOMj+7DO5Dj6LuwHdoIXYXl
z7dqDxbxvtb0O7LiATTxM3eufufBieDYuVQ+3xRfDj1O6Mnsdkmw9ALdwxaBH4Ry
ggIBAECBALAIBAgM+SMmvKcjiwxJjRoXvtjq5wJ+Xx71cXxXRGxCXcbvY+WxvLnFxZYYpYil
sBT4uJbNiXuB73DxbVinTyuoZjFnuCzlu+XyBd4lMzGsn5B9rBl9oVrUVuMfYdMuRt
uUWHzAGXY+rBwJpwPrimHiFOL9HUSHoK6ymDdyiI6G2GUeo6S2TRegHmUs8cKB
wj7VJTUt9AoICAQCggkpAgEAQEFAASCCS0wgkqhkiG9w0BAADANB
MIIJQwIBAgIUQJIIFazCCA1OgAwIBAgIUQJIIFazCCA1OgAwIBAgIUQJIIFazCCA1Og
-----END CERTIFICATE-----`;

const sslDir = path.join(__dirname, '..', 'config', 'ssl');

// Create SSL directory if it doesn't exist
if (!fs.existsSync(sslDir)) {
  fs.mkdirSync(sslDir, { recursive: true });
  console.log('üìÅ Created SSL directory');
}

// Write test certificates for HTTPS testing
fs.writeFileSync(path.join(sslDir, 'server.key'), testKey);
fs.writeFileSync(path.join(sslDir, 'server.crt'), testCert);

console.log('‚úÖ Test SSL certificates generated successfully!');